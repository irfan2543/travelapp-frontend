<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8" />  
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />  
    <link  
      href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css"  
      rel="stylesheet"  
    />  
    <title>Riwayat Transaksi</title>  
</head>  
<body  
    class="bg-gradient-to-br from-purple-100 to-indigo-200 min-h-screen flex items-center justify-center"  
>  
    <div class="bg-white shadow-2xl rounded-3xl p-10 w-full max-w-6xl">  
        <h1 class="text-3xl font-bold text-center text-gray-800 mb-8">  
            Riwayat Transaksi  
        </h1>  
        <div class="overflow-x-auto">  
            <table  
                class="w-full text-sm text-left text-gray-600 border shadow-lg rounded-lg"  
            >  
                <thead class="text-xs text-white uppercase bg-indigo-600">  
                    <tr>  
                        <th class="px-6 py-3">Nama</th>  
                        <th class="px-6 py-3">Email</th>  
                        <th class="px-6 py-3">Harga</th>  
                        <th class="px-6 py-3">Status</th>  
                    </tr>  
                </thead>  
                <tbody id="history-table" class="bg-white divide-y divide-gray-200"></tbody>  
            </table>  
        </div>  
    </div>  
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>  
    <script>  
        axios.get("http://localhost:3002/flight_booking")  
            .then((response) => {  
                const transactionHistory = response.data;  
                const statusColors = {  
                    success: "text-green-600 font-semibold",  
                    pending: "text-yellow-500 font-semibold",  
                    failed: "text-red-600 font-semibold",  
                };  
  
                const tableBody = document.getElementById("history-table");  
                transactionHistory.forEach((tx) => {  
                    const row = document.createElement("tr");  
                    row.innerHTML = `  
                        <td class="px-6 py-4 whitespace-nowrap">${tx.full_name}</td>  
                        <td class="px-6 py-4 whitespace-nowrap">${tx.email}</td>  
                        <td class="px-6 py-4 whitespace-nowrap font-semibold text-green-600">${tx.price ? `Rp ${tx.price.toLocaleString()}` : 'N/A'}</td>  
                        <td class="px-6 py-4 whitespace-nowrap ${statusColors[tx.booking_status]}">${tx.booking_status.charAt(0).toUpperCase() + tx.booking_status.slice(1)}</td>  
                    `;  
                    row.className = "hover:bg-indigo-100 transition-all duration-300";  
                    tableBody.appendChild(row);  
                });  
            })  
            .catch((error) => {  
                console.error("Error fetching transaction history:", error);  
                alert("Terjadi kesalahan saat mengambil riwayat transaksi.");  
            });  
    </script>  
</body>  
</html>  
